<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Joinda - Community | Forgot Password</title>
    <link rel="shortcut icon" href="./assets/favicon.png" type="image/png" />
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bodyText: "#6B7280",
                        primaryBg: "#04141D",
                        secondaryGrey: "#778692",
                        secondary: "#8AE5CF",
                        footerBg: "#030E14",
                    },
                    backgroundImage: {
                        'slide-primary': "url('./assets/slide1-bg.png')",
                    },
                    keyframes: {
                        "bounce-card": {
                            '0%, 100%': { transform: "translateY(4%)" },
                            '50%': { transform: "translateY(-4%)" },
                        },
                    },
                    animation: {
                        "bounce-card": "bounce-card 3s linear infinite",
                    }
                }
            }
        }
    </script>
    <style>
        .left-container::before {
            content: '';
            top: 0;
            left: 0;
            background: url('./assets/vector-top.png');
            background-position: bottom right;
            position: absolute;
            width: 120px;
            height: 215px;
        }

        .left-container::after {
            content: '';
            bottom: 0;
            right: 0;
            background: url('./assets/vector-bottom.png');
            position: absolute;
            width: 136px;
            height: 243px;
        }

        #modalTitle {
            background: linear-gradient(90deg, #C8C8C8 4.29%, #878787 97.5%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-fill-color: transparent;
        }

        .bg-slide-primary {
            background-size: calc(100% - 10px);
            background-position: bottom left;
            background-repeat: no-repeat;
        }

        /* Scaling animation */
        @keyframes scaleIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Fade-out and move-up animation */
        @keyframes fadeOutUp {
            0% {
                opacity: 1;
                transform: translateY(0);
            }

            100% {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        .scale-in {
            animation: scaleIn 0.8s forwards;
        }

        .fade-out-up {
            animation: fadeOutUp 0.8s forwards;
        }
    </style>
</head>

<body>
    <main class="bg-primaryBg min-h-[calc(100vh_-_60px)] flex">
        <div class="w-full md:w-1/2 left-container relative">
            <div class="mt-[60px] mb-8 mx-auto flex flex-col w-fit justify-center items-center">
                <img src="<?php echo $wo['config']['theme_url']; ?>/img/joinda-logo.png" class="w-[100px] h-auto"
                    alt="Joinda Logo" />
                <p class="text-bodyText text-center  text-[16px]">
                    Step into the Joinda universe
                </p>
            </div>
            <div class="w-full max-w-[528px] mx-auto px-4">
                <div>
                    <h2 id="modalTitle" class="text-3xl font-semibold mb-2 leading-[50px]">
                        Forgot Password
                    </h2>
                    <div id="loginIndicator" class="h-[5px] w-[101px] rounded-sm bg-[#8AE5CF]"></div>
                </div>

                <!-- Login content -->
                <div class="" id="login_div">
                    <div class="flex w-full text-[#858585] pt-7 pb-9">
                        <?php
                        $allow_switch = false;
                        if ($wo['config']['sms_provider'] == 'twilio') {
                            if ($wo['config']['sms_twilio_username'] !== "" and $wo['config']['sms_twilio_password'] !== "") {
                                if ($wo['config']['emailValidation'] == 1) {
                                    if ($wo['config']['sms_or_email'] == "sms") {
                                        $allow_switch = true;
                                    }
                                }
                            }
                        } else if ($wo['config']['sms_provider'] == 'bulksms') {
                            if ($wo['config']['sms_username'] !== "" and $wo['config']['sms_password'] !== "") {
                                if ($wo['config']['emailValidation'] == 1) {
                                    if ($wo['config']['sms_or_email'] == "sms") {
                                        $allow_switch = true;
                                    }
                                }
                            }
                        } else if ($wo['config']['sms_provider'] == 'infobip') {
                            if ($wo['config']['infobip_api_key'] !== "" and $wo['config']['infobip_base_url'] !== "") {
                                if ($wo['config']['emailValidation'] == 1) {
                                    if ($wo['config']['sms_or_email'] == "sms") {
                                        $allow_switch = true;
                                    }
                                }
                            }
                        }
                        ?>

                        <?php if ($allow_switch) { ?>
                            <form class="x_chooser">
                                <div class="login_signup_combo wow_forgot_choice">
                                    <div class="login__">
                                        <button type="button" class="btn btn-main btn-mat"
                                            id="recover_password_by_email"><?php echo $wo['lang']['recover_password_by_email'] ?></button>&nbsp;&nbsp;
                                        <button type="button" class="btn btn-main btn-mat"
                                            id="recover_password_by_sms"><?php echo $wo['lang']['recover_password_by_sms'] ?></button>
                                    </div>
                                </div>
                            </form>
                        <?php } ?>
                        <form method="post" class="flex flex-col w-full" id="forgot-form" <?php if ($allow_switch) {
                            echo 'style="display: none;"';
                        } ?>>
                            <div class="alert alert-danger login_errors"></div>
                            <div class="flex flex-col gap-3">
                                <label for="email"> Email </label>
                                <input id="recoveremail" name="recoveremail" placeholder="Enter your email" type="email"
                                    class="h-20 w-full max-w-[600px] border border-secondaryGrey focus:border-secondary outline-none text-secondaryGrey placeholder:text-secondaryGrey/80 text-xl bg-transparent rounded-[10px] px-4" />
                            </div>
                            <?php if ($wo['config']['reCaptcha'] == 1) { ?>
                                <div class="form-group" style="margin-top:10px;">
                                    <div class="g-recaptcha" data-sitekey="<?php echo $wo['config']['reCaptchaKey'] ?>">
                                    </div>
                                </div>
                            <?php } ?>
                            <p class="mt-[25px] text-[15px] text-center text-[#FCFCFC] ml-auto">Don&apos;t have an
                                account?
                                <a href="/" class="text-[#8AE5CF] font-semibold">Create Account</a>
                            </p>
                            <button type="submit"
                                class="bg-secondaryGrey text-white font-medium text-[22px] rounded-full flex items-center justify-center w-full h-20 gap-4 hover:opacity-80 active:opacity-100 transition duration-200 my-7">
                                Recover Account
                            </button>
                        </form>
                    </div>
                </div>
            </div>


            <form id="forgot-form-sms" class="recover_password_by_sms" method="post" style="display: none;">
                <div class="login_errors"></div>
                <div class="wow_form_fields">
                    <label for="recoverphone"><?php echo $wo['lang']['phone_number'] ?></label>
                    <input id="recoverphone" name="recoverphone" type="text" autofocus />
                </div>

                <div class="login_signup_combo">
                    <div class="login__">
                        <button type="submit" style="background-color: #c32e3a!important;"
                            class="btn btn-main btn-mat add_wow_loader"><?php echo $wo['lang']['recover_password'] ?></button>
                    </div>
                </div>
            </form>


            <div class="w-full max-w-[528px] mx-auto px-4">
                <p class="text-white font-semibold text-center mb-8">
                    Already have an account?
                </p>
                <a href="/"
                    class="border border-secondaryGrey text-secondaryGrey font-medium text-[22px] rounded-full flex items-center justify-center w-full h-20 gap-4 hover:opacity-80 active:opacity-100 transition duration-200 my-7">
                    Sign In
                </a>
            </div>
            <div class="px-4 flex justify-center mt-[55px] mb-12 gap-[14px]">
                <button
                    class="border border-[#778692] rounded-md h-[50px] flex items-center px-3 hover:scale-90 active:scale-100 transition duration-200">
                    <img src="<?php echo $wo['config']['theme_url']; ?>/img/google-play.png"
                        alt="Get it on Google Play" />
                </button>
                <button
                    class="border border-[#778692] rounded-md h-[50px] flex items-center px-[15px] hover:scale-90 active:scale-100 transition duration-200">
                    <img src="<?php echo $wo['config']['theme_url']; ?>/img/app-store.png"
                        alt="Download on the App Store" />
                </button>
            </div>
        </div>
        <div
            class="bg-[url('<?php echo $wo['config']['theme_url']; ?>/img/background.png')] w-1/2 hidden-mobile md:flex justify-center items-center">


            <div id="logo-container" class="flex justify-center items-center w-full h-full">
                <img src="<?php echo $wo['config']['theme_url']; ?>/img/joinda-logo.png"
                    class="w-[240px] h-auto aspect-square" alt="Joinda Logo" />
            </div>
            <div id="screen-container" class="hidden justify-center items-center w-full h-full">
                <img src="<?php echo $wo['config']['theme_url']; ?>/img/joinda-screen.png"
                    class="w-auto max-w-[381px] xl:max-w-[400px] 2xl:max-w-[420px] h-auto max-h-[560px] xl:max-h-[620px] aspect-auto"
                    alt="Joinda Logo" />
            </div>

            <div id="carousel-container" class="hidden relative w-full overflow-hidden">
                <div
                    class="carousel-wrapper flex gap-8 transition-transform duration-500 ease-in-out max-h-[600px] xl:max-h-[680px] scale-125">
                    <!-- Slide 1 -->
                    <div class="carousel-slide w-[352px] xl:w-[400px] 2xl:w-[420px]">
                        <div
                            class="flex flex-col bg-[#7F5CE2] bg-slide-primary w-[352px] xl:w-[400px] 2xl:w-[420px] h-full min-h-[522px] rounded-3xl bg-cover">
                            <p class="text-lg text-white p-7">
                                Use <span class="font-bold">JOIN</span> as a secure and transparent
                                <span class="font-bold text-[#89DAD0]">means of exchange</span>
                                within the ecosystem.
                            </p>
                            <div class="flex h-[350px] w-full object-scale-down">
                                <img src="<?php echo $wo['config']['theme_url']; ?>/img/carousel/kites.webp"
                                    alt="Two flying kites around Join token" class="flex w-full h-auto" />
                            </div>
                        </div>
                    </div>

                    <!-- Slide 2 -->
                    <div class="carousel-slide">
                        <div
                            class="bg-[#030E14] w-[352px] xl:w-[400px] 2xl:w-[420px] h-full min-h-[522px] rounded-3xl px-7 pt-0">
                            <p class="text-lg text-white py-7">
                                Introducing our
                                <span class="font-bold text-[#89DAD0]">global</span>
                                decentralized crypto debit card for in - store and online payments.
                            </p>
                            <div class="relative top-0 h-[380px] flex items-center px-1">
                                <div
                                    class="absolute h-full w-full bg-slide-card mix-blend-color-dodge bg-contain bg-center bg-no-repeat">
                                </div>
                                <img draggable={false}
                                    src="<?php echo $wo['config']['theme_url']; ?>/img/carousel/card.webp" width={1056}
                                    height={1113} alt="Join in-game purchase screen shot"
                                    class="flex mx-auto h-full w-auto object-scale-down mix-blend-normal animate-bounce-card" />
                            </div>
                        </div>
                    </div>

                    <!-- Slide 3 -->
                    <div class="carousel-slide">
                        <div
                            class="bg-[#030E14] text-white w-[352px] xl:w-[400px] 2xl:w-[420px] h-full min-h-[522px] rounded-3xl p-7 pt-0">
                            <div class="flex items-start">
                                <img draggable={false}
                                    src="<?php echo $wo['config']['theme_url']; ?>/img/carousel/pay.webp" width={822}
                                    height={1224} alt="Join payment successful screen shot"
                                    class="flex mx-auto w-auto h-auto" />
                            </div>
                            <p class="text-lg pt-7">
                                <span class="font-bold text-[#89DAD0]">Pay </span>for a wide
                                range of products and services using
                                <span class="font-semibold"> JOIN </span> tokens
                            </p>
                        </div>

                    </div>

                    <!-- Slide 4 -->
                    <div class="carousel-slide">
                        <div
                            class="bg-[#030E14] w-[352px] xl:w-[400px] 2xl:w-[420px] h-full min-h-[522px] rounded-3xl p-7 pt-0">
                            <div class="flex items-start">
                                <img draggable={false}
                                    src="<?php echo $wo['config']['theme_url']; ?>/img/carousel/rewards.webp"
                                    width={810} height={1237} alt="Join rewards screen shot"
                                    class="flex mx-auto h-full w-auto object-contain" />
                            </div>
                            <p class="text-lg text-white pt-7">
                                <span class="font-bold text-[#89DAD0]">Earn Rewards </span>in
                                <span class="font-semibold"> JOIN </span>
                                for high engagement and content creation
                            </p>
                        </div>
                    </div>

                    <!-- Slide 5 -->
                    <div class="carousel-slide">
                        <div
                            class="bg-[#030E14] flex flex-col w-[352px] xl:w-[400px] 2xl:w-[420px] h-full min-h-[522px] rounded-3xl px-7 py-0">
                            <p class="text-lg text-white py-7">
                                <span class="font-bold text-[#89DAD0]">Raise Funds </span>
                                by launching crowdfunding campaigns for your projects.
                            </p>
                            <div class="flex justify-end items-end h-full">
                                <img draggable={false}
                                    src="<?php echo $wo['config']['theme_url']; ?>/img/carousel/funds.webp"
                                    alt="Join fundraising screen shot" class="flex mx-auto h-auto w-auto bottom-0" />
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <img src="<?php echo $wo['config']['theme_url']; ?>/img/joinda-logo.png"
                class="hidden w-[240px] h-auto aspect-square" alt="Joinda Logo" />
        </div>
    </main>
    <footer class="min-h-[60px] bg-footerBg flex justify-center items-center">
        <div class="w-full max-w-[942px]  md:w-full mx-auto px-4 flex">
            <ul class="flex flex-wrap gap-x-10 text-bodyText items-center justify-center md:w-full text-center py-4">
                <li><a href="#" class="text-sm md:text-[14px]">Features</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Help Center</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Terms of Service</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Privacy Policy</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Cookie Policy</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Accessibility</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Careers</a></li>
                <li><a href="#" class="text-sm md:text-[14px]">Settings</a></li>
            </ul>
        </div>
    </footer>

    <script>




        $(function () {
            var working = false;
            var $formEmail = $('#forgot-form');
            var $formSMS = $('#forgot-form-sms');
            var $stateEmail = $formEmail.find('.login_errors');
            var $stateSMS = $formSMS.find('.login_errors');

            // Toggle display for recovery options
            $('#recover_password_by_email').click(function () {
                $('.x_chooser').hide();
                $('.recover_password_by_email').show();
            });

            $('#recover_password_by_sms').click(function () {
                $('.x_chooser').hide();
                $('.recover_password_by_sms').show();
            });

            // Forgot password by email AJAX form submission
            $formEmail.on('submit', function (e) {
                e.preventDefault();
                if (working) return;

                working = true;
                $formEmail.find('button').attr("disabled", true);
                $formEmail.find('.add_wow_loader').addClass('btn-loading');

                $.ajax({
                    url: Wo_Ajax_Requests_File() + '?f=recover',
                    type: 'POST',
                    data: $formEmail.serialize(),
                    beforeSend: function () {
                        console.log("Initiating forgot password by email request...");
                    },
                    success: function (data) {
                        console.log("Email recovery response:", data);
                        if (data.status == 200) {
                            $stateEmail.removeClass('alert-danger').addClass('alert-success').html('<?php echo $wo['lang']['email_sent'] ?>');
                        } else {
                            $formEmail.find('button').attr("disabled", false);
                            $stateEmail.addClass('alert-danger').html(data.errors || 'An error occurred');
                        }
                        $formEmail.find('.add_wow_loader').removeClass('btn-loading');
                        working = false;
                    },
                    error: function (xhr, status, error) {
                        console.error("Forgot Password by Email AJAX Error:", error);
                        $formEmail.find('button').attr("disabled", false);
                        $formEmail.find('.add_wow_loader').removeClass('btn-loading');
                        working = false;
                    }
                });
            });

            // Forgot password by SMS AJAX form submission
            $formSMS.on('submit', function (e) {
                e.preventDefault();
                if (working) return;

                working = true;
                $formSMS.find('button').attr("disabled", true);
                $formSMS.find('.add_wow_loader').addClass('btn-loading');

                $.ajax({
                    url: Wo_Ajax_Requests_File() + '?f=recoversms',
                    type: 'POST',
                    data: $formSMS.serialize(),
                    beforeSend: function () {
                        console.log("Initiating forgot password by SMS request...");
                    },
                    success: function (data) {
                        console.log("SMS recovery response:", data);
                        if (data.status == 200) {
                            $stateSMS.removeClass('alert-danger').addClass('alert-success').html('<?php echo $wo['lang']['recoversms_sent'] ?>');
                            setTimeout(function () {
                                window.location.href = data.location;
                            }, 1000);
                        } else {
                            $formSMS.find('button').attr("disabled", false);
                            $stateSMS.addClass('alert-danger').html(data.errors || 'An error occurred');
                        }
                        $formSMS.find('.add_wow_loader').removeClass('btn-loading');
                        working = false;
                    },
                    error: function (xhr, status, error) {
                        console.error("Forgot Password by SMS AJAX Error:", error);
                        $formSMS.find('button').attr("disabled", false);
                        $formSMS.find('.add_wow_loader').removeClass('btn-loading');
                        working = false;
                    }
                });
            });
        });

    </script>
</body>

</html>